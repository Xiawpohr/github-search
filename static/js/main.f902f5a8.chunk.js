(this["webpackJsonpgithub-search"]=this["webpackJsonpgithub-search"]||[]).push([[0],{77:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),i=r.n(a),c=r(41),s=r.n(c),u=r(10),o=r(42),h=r.n(o),f=r(3),l=r.n(f),b=r(27),p=r(8),j=r(12),v=r(19),d=r(4),O=r(43);var x=r(23),g=r(44),m=r(45),k=r.n(m),w=r(46),y=r(49),P=r(50),L=function(e){Object(w.a)(r,e);var t=Object(y.a)(r);function r(e){var n;return Object(x.a)(this,r),(n=t.call(this,e)).httpCode=void 0,n.httpCode=403,n}return r}(Object(P.a)(Error)),R=r(25),S=r(30);function q(e){return"?"+Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}var z=function(){function e(t){Object(x.a)(this,e),this.baseUrl=void 0,this.query="",this.perPage=100,this.rateLimit=10,this.rateLimitRemaining=0,this.rateLimitReset=0,this.client=void 0,this.paginations=void 0,this.baseUrl=t||"https://api.github.com",this.client=k.a.create({baseURL:this.baseUrl,timeout:5e3})}return Object(g.a)(e,[{key:"setPerPage",value:function(e){this.perPage=e}},{key:"getRetryAfter",value:function(){return Date.now()<this.rateLimitReset?Math.ceil((this.rateLimitReset-Date.now())/1e3):0}},{key:"search",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("can not search empty string");case 2:return this.query=t,r=q({q:this.query,per_page:this.perPage}),n="/search/repositories".concat(r),e.abrupt("return",this.request(n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canNextPage",value:function(){var e;return!!(null===(e=this.paginations)||void 0===e?void 0:e.next)}},{key:"canPreviousPage",value:function(){var e;return!!(null===(e=this.paginations)||void 0===e?void 0:e.prev)}},{key:"nextPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.next)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.next));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"previousPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.prev)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.prev));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"firstPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.first)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.first));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lastPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.last)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.last));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0===this.rateLimitRemaining&&this.rateLimitReset>Date.now())){e.next=2;break}throw new L("no rate limit");case 2:return e.prev=2,e.next=5,this.client.get(t);case 5:return r=e.sent,this.paginations=r.headers.link.split(", ").map((function(e){var t=e.split("; "),r=t[0].slice(1,-1);return[t[1].split("=")[1].slice(1,-1),r]})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(R.a)({},t[0],t[1]))}),{}),this.rateLimit=parseInt(r.headers["x-ratelimit-limit"]),this.rateLimitRemaining=parseInt(r.headers["x-ratelimit-remaining"]),this.rateLimitReset=1e3*parseInt(r.headers["x-ratelimit-reset"]),e.abrupt("return",r.data.items);case 13:if(e.prev=13,e.t0=e.catch(2),403!==e.t0.response.status){e.next=17;break}throw new L(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=r(79),C=r(80),I=r(81);function _(){var e=Object(v.a)(["\n  border: 1px solid ",";\n  border-radius: 8px;\n  box-shadow: ",";\n"]);return _=function(){return e},e}var T=Object(u.b)(d.b)(_(),(function(e){return e.theme.colors.gray}),(function(e){return e.theme.shadows.card}));function N(e){var t=e.name,r=e.description,a=e.stargazers,i=e.watchers,c=e.forks,s=e.url;return Object(n.jsxs)(T,{width:1,p:3,children:[Object(n.jsx)(d.e,{href:s,target:"_blank",rel:"noopenner noreferrer",children:Object(n.jsx)(d.d,{fontSize:3,children:t})}),Object(n.jsx)(d.f,{mt:2,children:r}),Object(n.jsxs)(d.c,{mt:3,children:[Object(n.jsxs)(d.c,{width:1,children:[Object(n.jsx)(E.a,{size:"24"}),Object(n.jsx)(d.f,{ml:1,children:a})]}),Object(n.jsxs)(d.c,{width:1,children:[Object(n.jsx)(C.a,{size:"24"}),Object(n.jsx)(d.f,{ml:1,children:i})]}),Object(n.jsxs)(d.c,{width:1,alignItems:"center",children:[Object(n.jsx)(I.a,{size:"24"}),Object(n.jsx)(d.f,{ml:1,children:c})]})]})]})}function A(){var e=Object(v.a)(["\n  margin: 32px 0;\n  padding: 0;\n  list-style: none;\n\n  > *:not(:first-child) {\n    margin-top: 24px;\n  }\n"]);return A=function(){return e},e}var D=u.b.ul(A()),F=new z;function M(){var e=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e.current}(),t=Object(a.useState)(""),r=Object(j.a)(t,2),i=r[0],c=r[1],s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=Object(a.useState)(e),n=Object(j.a)(r,2),i=n[0],c=n[1];return Object(a.useEffect)((function(){var r=setTimeout((function(){c(e)}),t);return function(){clearTimeout(r)}}),[e,t]),i}(i,500),u=Object(a.useState)([]),o=Object(j.a)(u,2),h=o[0],f=o[1],v=Object(a.useState)(!1),x=Object(j.a)(v,2),g=x[0],m=x[1],k=Object(a.useState)(!1),w=Object(j.a)(k,2),y=w[0],P=w[1],R=Object(a.useState)(0),S=Object(j.a)(R,2),q=S[0],z=S[1];Object(a.useEffect)((function(){var e;return q&&(e=setTimeout((function(){z(q-1)}),1e3)),function(){clearTimeout(e)}}),[q]);var E=Object(a.useCallback)(function(){var t=Object(p.a)(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(!0),t.next=4,F.search(r);case 4:n=t.sent,e&&(F.canNextPage()&&P(!0),f(Object(b.a)(n))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof L&&(a=F.getRetryAfter(),z(a));case 11:return t.prev=11,m(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}(),[e]),C=Object(a.useCallback)(Object(p.a)(l.a.mark((function t(){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!F.canNextPage()||0!==q){t.next=15;break}return t.prev=1,m(!0),t.next=5,F.nextPage();case 5:r=t.sent,e&&(F.canNextPage()?P(!0):P(!1),f((function(e){return[].concat(Object(b.a)(e),Object(b.a)(r))}))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0 instanceof L&&(n=F.getRetryAfter(),z(n));case 12:return t.prev=12,m(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])}))),[e,q]);Object(a.useEffect)((function(){s&&E(s)}),[s,E]);var I,_,T,A=Object(a.useRef)(null),M=Object(a.useRef)(null);I=C,_=M,T=A,Object(a.useLayoutEffect)((function(){var e=_.current,t=T.current||null;if(e){var r=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&I()}))}),{root:t,rootMargin:"0px 0px 0px 0px",threshold:.5});return r.observe(e),function(){return r.disconnect()}}}),[I,T,_]);var U=Object(a.useMemo)((function(){return i?q?"Wait ".concat(q," seconds to load"):y?"Loading more results...":g?"searching...":s?"No more result":void 0:"Please typing some keywords to search repositories"}),[y,g,i,s,q]);return Object(n.jsxs)(d.a,{sx:{maxWidth:900,mx:"auto",px:3},children:[Object(n.jsx)(d.d,{fontSize:5,color:"#07c",mb:2,children:"GitHub Search"}),Object(n.jsx)(O.a,{value:i,onChange:function(e){return c(e.currentTarget.value)}}),Object(n.jsxs)(d.a,{children:[Object(n.jsx)(D,{children:h.map((function(e,t){return Object(n.jsx)("li",{children:Object(n.jsx)(N,{name:e.full_name,description:e.description,stargazers:e.stargazers_count,watchers:e.watchers_count,forks:e.forks_count,url:e.html_url})},"".concat(e.node_id).concat(t))}))}),Object(n.jsx)(d.f,{ref:M,fontSize:3,color:"#30c",textAlign:"center",children:U})]})]})}function U(){return Object(n.jsx)(u.a,{theme:h.a,children:Object(n.jsx)(M,{})})}F.setPerPage(30);var B=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,82)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),i(e),c(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root")),B()}},[[77,1,2]]]);
//# sourceMappingURL=main.f902f5a8.chunk.js.map