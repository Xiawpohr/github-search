(this["webpackJsonpgithub-search"]=this["webpackJsonpgithub-search"]||[]).push([[0],{77:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),c=n(41),s=n.n(c),u=n(10),o=n(42),h=n.n(o),f=n(3),l=n.n(f),b=n(27),p=n(8),j=n(12),v=n(19),d=n(4),O=n(43);var x=n(23),g=n(44),m=n(45),k=n.n(m),w=n(46),y=n(49),P=n(50),L=function(e){Object(w.a)(n,e);var t=Object(y.a)(n);function n(e){var r;return Object(x.a)(this,n),(r=t.call(this,e)).httpCode=void 0,r.httpCode=403,r}return n}(Object(P.a)(Error)),R=n(25),S=n(30);function q(e){return"?"+Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}var I=function(){function e(t){Object(x.a)(this,e),this.baseUrl=void 0,this.query="",this.perPage=100,this.rateLimit=10,this.rateLimitRemaining=0,this.rateLimitReset=0,this.client=void 0,this.paginations=void 0,this.baseUrl=t||"https://api.github.com",this.client=k.a.create({baseURL:this.baseUrl,timeout:5e3})}return Object(g.a)(e,[{key:"setPerPage",value:function(e){this.perPage=e}},{key:"getRetryAfter",value:function(){return Date.now()<this.rateLimitReset?Math.ceil((this.rateLimitReset-Date.now())/1e3):0}},{key:"search",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("can not search empty string");case 2:return this.query=t,n=q({q:this.query,per_page:this.perPage}),r="/search/repositories".concat(n),e.abrupt("return",this.request(r));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canNextPage",value:function(){var e;return!!(null===(e=this.paginations)||void 0===e?void 0:e.next)}},{key:"canPreviousPage",value:function(){var e;return!!(null===(e=this.paginations)||void 0===e?void 0:e.prev)}},{key:"nextPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.next)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.next));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"previousPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.prev)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.prev));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"firstPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.first)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.first));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lastPage",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.paginations)||void 0===t?void 0:t.last)){e.next=2;break}return e.abrupt("return",this.request(this.paginations.last));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0===this.rateLimitRemaining&&this.rateLimitReset>Date.now())){e.next=2;break}throw new L("no rate limit");case 2:return e.prev=2,e.next=5,this.client.get(t);case 5:return n=e.sent,this.paginations=n.headers.link.split(", ").map((function(e){var t=e.split("; "),n=t[0].slice(1,-1);return[t[1].split("=")[1].slice(1,-1),n]})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(R.a)({},t[0],t[1]))}),{}),this.rateLimit=parseInt(n.headers["x-ratelimit-limit"]),this.rateLimitRemaining=parseInt(n.headers["x-ratelimit-remaining"]),this.rateLimitReset=1e3*parseInt(n.headers["x-ratelimit-reset"]),e.abrupt("return",n.data.items);case 13:if(e.prev=13,e.t0=e.catch(2),403!==e.t0.response.status){e.next=17;break}throw new L(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),z=n(79),E=n(80),C=n(81);function _(){var e=Object(v.a)(["\n  border: 1px solid ",";\n  border-radius: 8px;\n  box-shadow: ",";\n"]);return _=function(){return e},e}var T=Object(u.b)(d.b)(_(),(function(e){return e.theme.colors.gray}),(function(e){return e.theme.shadows.card}));function N(e){var t=e.name,n=e.description,a=e.stargazers,i=e.watchers,c=e.forks,s=e.url;return Object(r.jsxs)(T,{width:1,p:3,children:[Object(r.jsx)(d.e,{href:s,target:"_blank",rel:"noopenner noreferrer",style:{display:"inline-block"},children:Object(r.jsx)(d.d,{fontSize:3,width:1,children:t})}),Object(r.jsx)(d.f,{mt:2,children:n}),Object(r.jsxs)(d.c,{mt:3,children:[Object(r.jsxs)(d.c,{width:1,alignItems:"center",children:[Object(r.jsx)(z.a,{size:"24"}),Object(r.jsx)(d.f,{ml:1,children:a})]}),Object(r.jsxs)(d.c,{width:1,alignItems:"center",children:[Object(r.jsx)(E.a,{size:"24"}),Object(r.jsx)(d.f,{ml:1,children:i})]}),Object(r.jsxs)(d.c,{width:1,alignItems:"center",children:[Object(r.jsx)(C.a,{size:"24"}),Object(r.jsx)(d.f,{ml:1,children:c})]})]})]})}function A(){var e=Object(v.a)(["\n  margin: 32px 0;\n  padding: 0;\n  list-style: none;\n\n  > *:not(:first-child) {\n    margin-top: 24px;\n  }\n"]);return A=function(){return e},e}var D=u.b.ul(A()),F=new I;function M(){var e=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e.current}(),t=Object(a.useState)(""),n=Object(j.a)(t,2),i=n[0],c=n[1],s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=Object(a.useState)(e),r=Object(j.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),i}(i,500),u=Object(a.useState)([]),o=Object(j.a)(u,2),h=o[0],f=o[1],v=Object(a.useState)(!1),x=Object(j.a)(v,2),g=x[0],m=x[1],k=Object(a.useState)(!1),w=Object(j.a)(k,2),y=w[0],P=w[1],R=Object(a.useState)(0),S=Object(j.a)(R,2),q=S[0],I=S[1];Object(a.useEffect)((function(){var e;return q&&(e=setTimeout((function(){I(q-1)}),1e3)),function(){clearTimeout(e)}}),[q]);var z=Object(a.useCallback)(function(){var t=Object(p.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(!0),t.next=4,F.search(n);case 4:r=t.sent,e&&(F.canNextPage()&&P(!0),f(Object(b.a)(r))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0 instanceof L&&(a=F.getRetryAfter(),I(a));case 11:return t.prev=11,m(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}(),[e]),E=Object(a.useCallback)(Object(p.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!F.canNextPage()||0!==q){t.next=15;break}return t.prev=1,m(!0),t.next=5,F.nextPage();case 5:n=t.sent,e&&(F.canNextPage()?P(!0):P(!1),f((function(e){return[].concat(Object(b.a)(e),Object(b.a)(n))}))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0 instanceof L&&(r=F.getRetryAfter(),I(r));case 12:return t.prev=12,m(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])}))),[e,q]);Object(a.useEffect)((function(){s&&z(s)}),[s,z]);var C,_,T,A=Object(a.useRef)(null),M=Object(a.useRef)(null);C=E,_=M,T=A,Object(a.useLayoutEffect)((function(){var e=_.current,t=T.current||null;if(e){var n=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&C()}))}),{root:t,rootMargin:"0px 0px 0px 0px",threshold:.5});return n.observe(e),function(){return n.disconnect()}}}),[C,T,_]);var U=Object(a.useMemo)((function(){return i?q?"Wait ".concat(q," seconds to load"):y?"Loading more results...":g?"searching...":s?"No more result":void 0:"Please typing some keywords to search repositories"}),[y,g,i,s,q]);return Object(r.jsxs)(d.a,{sx:{maxWidth:900,mx:"auto",px:3},children:[Object(r.jsx)(d.d,{fontSize:5,color:"#07c",mb:2,children:"GitHub Search"}),Object(r.jsx)(O.a,{value:i,onChange:function(e){return c(e.currentTarget.value)}}),Object(r.jsxs)(d.a,{children:[Object(r.jsx)(D,{children:h.map((function(e,t){return Object(r.jsx)("li",{children:Object(r.jsx)(N,{name:e.full_name,description:e.description,stargazers:e.stargazers_count,watchers:e.watchers_count,forks:e.forks_count,url:e.html_url})},"".concat(e.node_id).concat(t))}))}),Object(r.jsx)(d.f,{ref:M,fontSize:3,color:"#30c",textAlign:"center",children:U})]})]})}function U(){return Object(r.jsx)(u.a,{theme:h.a,children:Object(r.jsx)(M,{})})}F.setPerPage(30);var B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(U,{})}),document.getElementById("root")),B()}},[[77,1,2]]]);
//# sourceMappingURL=main.2ae1d330.chunk.js.map